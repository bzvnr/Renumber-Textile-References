---
testCases:
  standard:
    lessThan10:
      input: |-
        h2. Section

        Lorem.[2] ipsum.[1] dolor.[2] sit amet.[2]

        h2. External References

        <div class="references"> 

        fn1. Second Ref

        fn2. First Ref

        </div>
      expected: |-
        h2. Section

        Lorem.[1] ipsum.[2] dolor.[1] sit amet.[1]

        h2. External References

        <div class="references">

        fn1. First Ref

        fn2. Second Ref

        </div>
    multiDigitCitation:
      input: |-
        h2. Section

        Lorem.[2] ipsum.[1000] dolor.[2] sit amet.[2]

        h2. External References

        <div class="references"> 

        fn1000. Second Ref

        fn2. First Ref

        </div>
      expected: |-
        h2. Section

        Lorem.[1] ipsum.[2] dolor.[1] sit amet.[1]

        h2. External References

        <div class="references">

        fn1. First Ref

        fn2. Second Ref

        </div>
    moreThan10:
      # contains multi-digit references
      input: |-
        h2. Section 

        Lorem.[2] ipsum.[1] dolor.[2] sit amet.[2] [7] consectetur adipiscing.[4]

        elit.[1][3][6]

        Sed la[10]cus.[101][13][12][101][10000000000][10000000000]

        h2. External References

        <div class="references"> 

        fn1. Second Ref

        fn2. First Ref

        fn6. Sixth Ref 

        fn3. Fifth Ref

        fn7. Third Ref 

        fn4. Fourth Ref

        fn101. Eighth Ref

        fn10000000000. Eleventh Ref

        fn10. Seventh Ref

        fn12. Tenth Ref

        fn13. Ninth Ref

        </div>
      expected: |-
        h2. Section 

        Lorem.[1] ipsum.[2] dolor.[1] sit amet.[1] [3] consectetur adipiscing.[4]

        elit.[2][5][6]

        Sed la[7]cus.[8][9][10][8][11][11]

        h2. External References

        <div class="references">

        fn1. First Ref

        fn2. Second Ref

        fn3. Third Ref

        fn4. Fourth Ref

        fn5. Fifth Ref

        fn6. Sixth Ref

        fn7. Seventh Ref

        fn8. Eighth Ref

        fn9. Ninth Ref

        fn10. Tenth Ref

        fn11. Eleventh Ref

        </div>
    referenceBeforeReferenceSectionAfterCitation:
      # note that whitespace left by the reference being in the text isn't deleted yet
      input: |-
        h2. Section

        Lorem.[2] ipsum.[1]

        fn1. Second Ref

        h2. External References

        fn2. First Ref

        <div class="references">

        </div>
      expected: |-
        h2. Section

        Lorem.[1] ipsum.[2]



        h2. External References

        <div class="references">

        fn1. First Ref

        fn2. Second Ref

        </div>
    referenceBeforeReferenceSectionBeforeCitation:
      input: |-
        h2. Section

        fn1. Second Ref

        Lorem.[2] ipsum.[1]

        h2. External References

        fn2. First Ref

        <div class="references">

        </div>
      expected: |-
        h2. Section



        Lorem.[1] ipsum.[2]

        h2. External References

        <div class="references">

        fn1. First Ref

        fn2. Second Ref

        </div>
...
